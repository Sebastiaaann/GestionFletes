{% extends "Base.html" %}

{% block tittle%}Balance{% endblock %}

{% extends "partials/gestion_layout.html" %}

{% block gestion_header %}
    <div class="d-flex align-items-start mb-3">
        <div>
            <h2 class="mb-0">Balance</h2>
        </div>
    </div>
{% endblock %}

{% block gestion_body %}
        <div class="row">
            <div class='col-md-6 mb-3'>
                <div class='card p-3'>
                    <h5>Balance</h5>
                    <canvas id="myBarChart"></canvas>
                </div>
            </div>
            <div class='col-md-6 mb-3'>
                <div class='card p-3'>
                    <h5>Vehiculos Disponibles</h5>
                    <canvas id="a"></canvas>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var ingresosTotales = {{ total_ingresos }}
                var egresosTotales = {{ total_egresos }}
                var saldoTotal = {{ saldo_total }}
                var data = {
                    labels: ['Ingresos total', 'Egresos total', 'Beneficios total'],
                    datasets: [{ label: 'Balance Flete', data: [ingresosTotales, egresosTotales, saldoTotal], backgroundColor: ['#10b981', '#ef4444', '#3b82f6'] }]
                };
                var ctx = document.getElementById('myBarChart').getContext('2d');
                new Chart(ctx, { type: 'bar', data: data, options: {} });

                var vehiculosInactivos = {{ vehiculos_inactivos }};
                var vehiculosActivos = {{ vehiculos_activos }};
                var data2 = { labels: ['Vehiculos Inactivos', 'Vehiculos activos'], datasets: [{ data: [vehiculosInactivos, vehiculosActivos], backgroundColor: ['#9ca3af', '#10b981'] }] };
                var ctx2 = document.getElementById('a').getContext('2d');
                new Chart(ctx2, { type: 'pie', data: data2, options: {} });
            });
        </script>
    {% endblock %}

{% endblock %}